<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<VBox alignment="CENTER" spacing="15.0"
      xmlns="http://javafx.com/javafx/20.0.2"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="org.example.demo.controller.backOffice.recyclingPoint.ListRecylcingPointController">
    <BorderPane prefHeight="800.0" prefWidth="1535.0">
        <left>
            <fx:include source="../sidebarBackoffice.fxml"/>
        </left>
        <top>
            <fx:include source="../topbarBackoffice.fxml"/>
        </top>
        <center>
            <AnchorPane prefHeight="665.0" prefWidth="1254.0"
                        style="-fx-background-color: #FCFBFB;"
                        stylesheets="@../../../../../../css/listUser.css">

                <!-- Title and Description -->
                <Text fill="#8a8282" layoutX="42.0" layoutY="52.0" text="Recycling Point List">
                    <font>
                        <Font name="Segoe UI Bold" size="17.0"/>
                    </font>
                </Text>
                <Text fill="#8a8282" layoutX="42.0" layoutY="77.0"
                      text="This dashboard provides a comprehensive list of Agriculture Investors, Recycling Investors,">
                    <font>
                        <Font name="Segoe UI" size="13.0"/>
                    </font>
                </Text>
                <Text fill="#8a8282" layoutX="42.0" layoutY="96.0"
                      text="and Resource Investors. Easily manage and visualize investor data to optimize engagement and ensure successful investments.">
                    <font>
                        <Font name="Segoe UI" size="13.0"/>
                    </font>
                </Text>

                <!-- Search Label and Field -->
                <Text fill="#8a8282" layoutX="1008.0" layoutY="144.0" text="Search:">
                    <font>
                        <Font size="14.0"/>
                    </font>
                </Text>
                <TextField fx:id="searchField" layoutX="1057.0" layoutY="125.0" styleClass="search-input"/>
                <Button fx:id="micButton" layoutX="1020.0" layoutY="125.0" text="ðŸŽ¤" onAction="#onMicClick"/>

                <!-- Add Point Button -->
                <HBox layoutX="1085.0" layoutY="81.0" onMouseClicked="#addpoint"
                      prefHeight="37.0" prefWidth="121.0"
                      style="-fx-background-color: #32BDEA; -fx-background-radius: 10px;">
                    <children>
                        <ImageView fitHeight="16.0" fitWidth="13.0" preserveRatio="true">
                            <image>
                                <Image url="@../../../../../../icons/plus.png"/>
                            </image>
                            <HBox.margin>
                                <Insets bottom="2.0" left="6.0" top="13.0"/>
                            </HBox.margin>
                        </ImageView>
                        <Button onMouseClicked="#addpoint" text="Add Point" style="-fx-text-fill: white;"/>
                    </children>
                </HBox>

                <!-- Main Content: Table and Switchable Panel -->
                <HBox layoutX="42.0" layoutY="150.0" spacing="50.0">

                    <!-- TableView -->
                    <TableView fx:id="pointTable" prefHeight="500.0" prefWidth="750.0" styleClass="styled-table">
                        <columns>
                            <TableColumn fx:id="pointColumn" prefWidth="200.0" text="Point"/>
                            <TableColumn fx:id="categoryColumn" prefWidth="200.0" text="Category"/>
                            <TableColumn fx:id="dateColumn" prefWidth="150.0" text="Date"/>
                            <TableColumn fx:id="actionsColumn" prefWidth="200.0" text="Actions"/>
                        </columns>
                    </TableView>

                    <!-- TabPane for Statistics, Chat, and Image Analysis -->
                    <TabPane fx:id="tabPane"
                             prefWidth="400.0" prefHeight="500.0"
                             styleClass="custom-switch-tabs">
                        <tabs>

                            <!-- Statistics Tab -->
                            <Tab text="" closable="false">
                                <graphic>
                                    <ImageView fitWidth="36" fitHeight="36" preserveRatio="true">
                                        <image>
                                            <Image url="@../../../../../../icons/stats.png"/>
                                        </image>
                                    </ImageView>
                                </graphic>
                                <content>
                                    <VBox spacing="15.0" alignment="TOP_CENTER" prefWidth="400.0">
                                        <PieChart fx:id="categoryPieChart" prefHeight="300.0" prefWidth="380.0"/>
                                        <Label fx:id="totalPointsLabel" text="Total Points: 0" style="-fx-font-size: 14px;"/>
                                        <Label fx:id="mostActiveCategoryLabel" text="Most Active Category: None" style="-fx-font-size: 14px;"/>
                                    </VBox>
                                </content>
                            </Tab>

                            <!-- Chat Tab -->
                            <Tab text="" closable="false">
                                <graphic>
                                    <ImageView fitWidth="48" fitHeight="48" preserveRatio="true">
                                        <image>
                                            <Image url="@../../../../../../icons/chat.png"/>
                                        </image>
                                    </ImageView>
                                </graphic>
                                <content>
                                    <VBox fx:id="chatBox" spacing="10" prefWidth="400.0" prefHeight="500.0"
                                          style="-fx-background-color: #E6F2E6; -fx-padding: 10; -fx-border-color: #32BDEA; -fx-border-radius: 10;">
                                        <!-- Bot Header -->
                                        <HBox alignment="CENTER_LEFT" spacing="10">
                                            <ImageView fitWidth="40" fitHeight="40" preserveRatio="true">
                                                <image>
                                                    <Image url="@../../../../../../icons/ecoBot.png"/>
                                                </image>
                                            </ImageView>
                                            <Label text="EcoBot" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2E7D32;"/>
                                        </HBox>
                                        <!-- Messages will be added here -->
                                        <HBox spacing="10" alignment="CENTER">
                                            <TextField fx:id="userInput" HBox.hgrow="ALWAYS" promptText="Type your message"/>
                                            <Button text="Send" onAction="#sendMessage"
                                                    style="-fx-background-color: #32BDEA; -fx-text-fill: white; -fx-font-size: 14px;"/>
                                        </HBox>
                                    </VBox>
                                </content>
                            </Tab>

                            <!-- Image Analysis Tab -->
                            <Tab text="" closable="false">
                                <graphic>
                                    <ImageView fitWidth="36" fitHeight="36" preserveRatio="true">
                                        <image>
                                            <Image url="@../../../../../../icons/camera.png"/>
                                        </image>
                                    </ImageView>
                                </graphic>
                                <content>
                                    <VBox spacing="15.0" alignment="TOP_CENTER" prefWidth="400.0" prefHeight="500.0" style="-fx-padding: 10;">
                                        <!-- Buttons to upload or open camera -->
                                        <HBox spacing="10">
                                            <Button fx:id="uploadButton" text="Upload Image" onAction="#onUploadImage"/>
                                            <Button fx:id="cameraButton" text="Open Camera" onAction="#onOpenCamera"/>
                                        </HBox>
                                        <!-- Display selected image -->
                                        <ImageView fx:id="analyzedImageView" fitWidth="380.0" fitHeight="200.0" preserveRatio="true" style="-fx-border-color: #ccc; -fx-border-radius: 5px;"/>
                                        <!-- Analysis details -->
                                        <TextArea fx:id="descriptionArea" prefWidth="380.0" prefHeight="120.0" editable="false" wrapText="true" promptText="Analysis description..."/>
                                        <Label fx:id="recyclableLabel" text="Recyclability: N/A" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                                    </VBox>
                                </content>
                            </Tab>

                        </tabs>
                    </TabPane>
                </HBox>
            </AnchorPane>
        </center>
    </BorderPane>
</VBox>
